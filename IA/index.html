<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="description" content="Simples Aprendizado de Redes Neurais com Imagem">
		<meta name="keywords" content="HTML,CSS,JavaScript,Neural,Network">
		<meta name="author" content="Gabriel Dewes">
		<title>IA - Aprendizado de Redes Neurais com Imagem</title>
		<link rel="stylesheet" href="css/main.css">
		<link rel="stylesheet" href="css/loading.css">
	</head>
	<body>
		<div class='toast'></div>

		<div class="row col-12 box">
			<label for="imageLoader">Upload an image to test the neuro: </label>
			<input type="file" id="imageLoader" name="imageLoader"/>
			<div id="uploaded"></div>
		</div>

		<div class="row col-12">
			<div class="loading">
				<h1>Treinando rede...</h1>
				<span></span><span></span><span></span><span></span>
			</div>
			<h1 style="display:none;" id="bar">A rede já está treinada com as seguintes imagens:</h1>
		</div>

		<div id="trained"></div>
		<div id="weights"></div>

	</body>
	<script src="js/jquery-3.1.1.min.js"></script>
	<script src="js/image.js" charset="utf-8"></script>
	<script src="js/neuro.js" charset="utf-8"></script>
	<script src="js/domutils.js" charset="utf-8"></script>
	<script type="text/javascript">
		$('.loading').fadeIn(0);

		var trainedSet = [],
				brain;
		loadImages(function(loadedDom) {
			trainedSet = toBinaryArraySet(loadedDom);
			brain = train(trainedSet);
			stringify(brain.weight, true);

			$('.loading').fadeOut(400);
			$('#bar').fadeIn(400);
		});

	/** Passo para minha rede uma array de objects,
		* sendo que cada object contém um
		* @input que é o binário da imagem,
		* @output que é a saída desejada;
		* no caso A=1, B=0.
		*
			var brain = train([
				{input: [[1,1], [1,0]], output: [1]},
				{input: [[0,0], [0,1]], output: [0]}
			]);

		*
		* Para apenas ajustar os pesos, passo o set de objects + os Pesos
		* já ajustados
		*
			brain = train([
				{input: [[1,0], [0,0]], output: [0]}
			], brain.weight);
		*
		* Para testar uma nova imagem, chamo a função run
		* passando o array binário desta imagem e os pesos já ajsutados
		*
			var r = run([[1,1], [0,0]], brain.weight);
			r == 1 ? "Parece um A" : "Parece um B";
		*/

		// Metodozinhos marotos para contornar as gambis
		function doTrain(data) {
			brain = train([
				{input: data.input, output: data.output}
			], brain.weight);
			$('.toast').text("Pesos ajustados!").fadeIn(400).delay(3000).fadeOut(400);
		}

		function doRun(data) {
			return run(data, brain.weight);
		}

	</script>
</html>
